<div class="avalanche-problem-container">
  <div class="form-group">
    <label class="form-label" for="">{{ "bulletins.create.label.avalancheProblems" | translate }}</label>
    <div *ngIf="!disabled" class="avalanche-problem-detail__problem-icons">
      <img
        *ngIf="isAvalancheProblem('new_snow')"
        src="./assets/img/New_snow_c.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.new_snow)"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('new_snow')"
        src="./assets/img/New_snow_bw.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.new_snow)"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('wind_slab')"
        src="./assets/img/Drifting_snow_c.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.wind_slab)"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('wind_slab')"
        src="./assets/img/Drifting_snow_bw.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.wind_slab)"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('persistent_weak_layers')"
        src="./assets/img/Persistent_weak_layers_c.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.persistent_weak_layers)"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('persistent_weak_layers')"
        src="./assets/img/Persistent_weak_layers_bw.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.persistent_weak_layers)"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('wet_snow')"
        src="./assets/img/Wet_snow_c.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.wet_snow)"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('wet_snow')"
        src="./assets/img/Wet_snow_bw.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.wet_snow)"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('gliding_snow')"
        src="./assets/img/Gliding_snow_c.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.gliding_snow)"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('gliding_snow')"
        src="./assets/img/Gliding_snow_bw.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.gliding_snow)"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="authenticationService.getActiveRegion().enableAvalancheProblemCornices && isAvalancheProblem('cornices')"
        src="./assets/img/Cornices_c.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.cornices)"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="
          authenticationService.getActiveRegion().enableAvalancheProblemCornices && !isAvalancheProblem('cornices')
        "
        src="./assets/img/Cornices_bw.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.cornices)"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="
          authenticationService.getActiveRegion().enableAvalancheProblemNoDistinctAvalancheProblem &&
          isAvalancheProblem('no_distinct_problem')
        "
        src="./assets/img/No_distinct_problem_c.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.no_distinct_problem)"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="
          authenticationService.getActiveRegion().enableAvalancheProblemNoDistinctAvalancheProblem &&
          !isAvalancheProblem('no_distinct_problem')
        "
        src="./assets/img/No_distinct_problem_bw.svg"
        (click)="selectAvalancheProblem(avalancheProblemEnum.no_distinct_problem)"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />
    </div>
    <div *ngIf="disabled" class="avalanche-problem-detail__problem-icons">
      <img
        *ngIf="isAvalancheProblem('new_snow')"
        src="./assets/img/New_snow_c.svg"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('new_snow')"
        src="./assets/img/New_snow_bw.svg"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('wind_slab')"
        src="./assets/img/Drifting_snow_c.svg"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('wind_slab')"
        src="./assets/img/Drifting_snow_bw.svg"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('persistent_weak_layers')"
        src="./assets/img/Persistent_weak_layers_c.svg"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('persistent_weak_layers')"
        src="./assets/img/Persistent_weak_layers_bw.svg"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('wet_snow')"
        src="./assets/img/Wet_snow_c.svg"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('wet_snow')"
        src="./assets/img/Wet_snow_bw.svg"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('gliding_snow')"
        src="./assets/img/Gliding_snow_c.svg"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="!isAvalancheProblem('gliding_snow')"
        src="./assets/img/Gliding_snow_bw.svg"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('cornices')"
        src="./assets/img/Cornices_c.svg"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="
          authenticationService.getActiveRegion().enableAvalancheProblemCornices && !isAvalancheProblem('cornices')
        "
        src="./assets/img/Cornices_bw.svg"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />

      <img
        *ngIf="isAvalancheProblem('no_distinct_problem')"
        src="./assets/img/No_distinct_problem_c.svg"
        class="avalanche-problem-detail__problem-icon"
      />
      <img
        *ngIf="
          authenticationService.getActiveRegion().enableAvalancheProblemNoDistinctAvalancheProblem &&
          !isAvalancheProblem('no_distinct_problem')
        "
        src="./assets/img/No_distinct_problem_bw.svg"
        class="avalanche-problem-detail__problem-icon is-disabled"
      />
    </div>
  </div>

  <div class="form-group row">
    <div class="col-md-6">
      <label class="form-label" for="">{{ "bulletins.create.label.aspects" | translate }}</label>
      <div>
        <app-aspects [(aspects)]="avalancheProblemModel.aspects" [disabled]="disabled" [size]="150"></app-aspects>
      </div>
    </div>
    <div class="col-md-6">
      <label class="form-label" for="">{{ "bulletins.create.label.elevation" | translate }}</label>
      <div class="avalanche-problem-detail__elevation">
        <input
          type="checkbox"
          class="form-check-input"
          [disabled]="disabled"
          (change)="setUseElevationHigh($event)"
          [(ngModel)]="useElevationHigh"
        />
        <label for="">{{ "bulletins.create.label.elevationHigh" | translate }}</label>
        <input
          step="100"
          min="0"
          max="9000"
          id="inputElevationHigh"
          class="form-control"
          size="14"
          type="number"
          name="elevation-input"
          [disabled]="disabled || avalancheProblemModel.treelineHigh || !useElevationHigh"
          [(ngModel)]="avalancheProblemModel.elevationHigh"
          (change)="updateElevationHigh()"
        />
        <span class="input-group-text">m</span>
        <button
          [disabled]="disabled || !useElevationHigh"
          type="reset"
          class="btn btn-secondary btn-icon btn-outline-secondary"
          (click)="treelineHighClicked($event)"
          data-toggle="tooltip"
          title="{{ 'bulletins.create.tooltip.treeline' | translate }}"
        >
          <i class="ph ph-tree-evergreen"></i>
        </button>
      </div>
      <div>
        <table>
          <tbody>
            <tr style="height: 60px">
              <td style="padding-right: 10px; vertical-align: baseline">
                <label class="switch switch-default switch-pill switch-primary">
                  <input
                    type="checkbox"
                    class="form-check-input"
                    [disabled]="disabled"
                    (change)="setUseElevationHigh($event)"
                    [(ngModel)]="useElevationHigh"
                  />
                </label>
              </td>
              <td style="padding-right: 10px; vertical-align: baseline">
                {{ "bulletins.create.label.elevationHigh" | translate }}
              </td>
              <td class="input-prepend input-group">
                <input
                  step="100"
                  min="0"
                  max="9000"
                  id="inputElevationHigh"
                  class="form-control"
                  size="14"
                  type="number"
                  name="elevation-input"
                  [disabled]="disabled || avalancheProblemModel.treelineHigh || !useElevationHigh"
                  [(ngModel)]="avalancheProblemModel.elevationHigh"
                  (change)="updateElevationHigh()"
                />
                <span class="input-group-addon">m</span>
              </td>
              <td style="padding-left: 10px; vertical-align: baseline" *ngIf="!avalancheProblemModel.treelineHigh">
                <button
                  [disabled]="disabled || !useElevationHigh"
                  type="reset"
                  class="btn btn-secondary"
                  (click)="treelineHighClicked($event)"
                  data-toggle="tooltip"
                  title="{{ 'bulletins.create.tooltip.treeline' | translate }}"
                >
                  <i class="fa fa-tree"></i>
                </button>
              </td>
              <td style="padding-left: 10px; vertical-align: baseline" *ngIf="avalancheProblemModel.treelineHigh">
                <button
                  [disabled]="disabled || !useElevationHigh"
                  type="reset"
                  class="btn btn-primary"
                  (click)="treelineHighClicked($event)"
                  data-toggle="tooltip"
                  title="{{ 'bulletins.create.tooltip.treeline' | translate }}"
                >
                  <i class="fa fa-tree"></i>
                </button>
              </td>
            </tr>

            <tr style="height: 60px">
              <td style="padding-right: 10px; vertical-align: baseline">
                <label class="switch switch-default switch-pill switch-primary">
                  <input
                    type="checkbox"
                    class="form-check-input"
                    [disabled]="disabled"
                    (change)="setUseElevationLow($event)"
                    [(ngModel)]="useElevationLow"
                  />
                  <span class="switch-label"></span>
                  <span class="switch-handle"></span>
                </label>
              </td>
              <td style="padding-right: 10px; vertical-align: baseline">
                {{ "bulletins.create.label.elevationLow" | translate }}
              </td>
              <td class="input-prepend input-group">
                <input
                  step="100"
                  min="0"
                  max="9000"
                  id="inputElevationLow"
                  class="form-control"
                  size="14"
                  type="number"
                  name="elevation-input"
                  [disabled]="disabled || avalancheProblemModel.treelineLow || !useElevationLow"
                  [(ngModel)]="avalancheProblemModel.elevationLow"
                  (change)="updateElevationLow()"
                />
                <span class="input-group-addon">m</span>
              </td>
              <td style="padding-left: 10px; vertical-align: baseline" *ngIf="!avalancheProblemModel.treelineLow">
                <button
                  [disabled]="disabled || !useElevationLow"
                  type="reset"
                  class="btn btn-secondary"
                  (click)="treelineLowClicked($event)"
                  data-toggle="tooltip"
                  title="{{ 'bulletins.create.tooltip.treeline' | translate }}"
                >
                  <i class="fa fa-tree"></i>
                </button>
              </td>
              <td style="padding-left: 10px; vertical-align: baseline" *ngIf="avalancheProblemModel.treelineLow">
                <button
                  [disabled]="disabled || !useElevationLow"
                  type="reset"
                  class="btn btn-primary"
                  (click)="treelineLowClicked($event)"
                  data-toggle="tooltip"
                  title="{{ 'bulletins.create.tooltip.treeline' | translate }}"
                >
                  <i class="fa fa-tree"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Seehöhe Gefahr nach oben/unten erweitern -->
        <div *ngIf="avalancheProblemModel.hasElevationHigh() && avalancheProblemModel.hasElevationLow()">
          <label>{{ "bulletins.create.changeDangerRatingElevation" | translate }}</label>

          <!-- UP Button -->
          <div class="btn-toolbar">
            <button
              [disabled]="disabled"
              type="reset"
              class="btn btn-sm"
              [ngClass]="{
                'btn-secondary': isDangerRatingDirection('up'),
                'btn-outline': !isDangerRatingDirection('up')
              }"
              (click)="setDangerRatingDirection($event, isDangerRatingDirection('up') ? undefined : directionEnum.up)"
              data-toggle="tooltip"
              title="{{ 'bulletins.create.tooltip.dangerRatingDirectionUp' | translate }}"
            >
              <i class="ph ph-arrow-up-right"></i>
            </button>

            <!-- DOWN Button -->
            <button
              [disabled]="disabled"
              type="reset"
              class="btn btn-sm"
              [ngClass]="{
                'btn-secondary': isDangerRatingDirection('down'),
                'btn-outline': !isDangerRatingDirection('down')
              }"
              (click)="
                setDangerRatingDirection($event, isDangerRatingDirection('down') ? undefined : directionEnum.down)
              "
              data-toggle="tooltip"
              title="{{ 'bulletins.create.tooltip.dangerRatingDirectionDown' | translate }}"
            >
              <i class="ph ph-arrow-down-right"></i>
            </button>
          </div>
          <!-- End of toolbar-->
        </div>
        <!-- Seehöhe Gefahr nach oben/unten erweitern -->
      </div>
    </div>
  </div>
  <div *ngIf="authenticationService.getActiveRegion().showMatrix" class="form-group">
    <app-matrix-parameter
      [(bulletin)]="bulletin"
      [(bulletinDaytimeDescription)]="bulletinDaytimeDescription"
      [(matrixInformation)]="avalancheProblemModel.matrixInformation"
      [disabled]="disabled"
    ></app-matrix-parameter>
    <app-matrix
      [(bulletin)]="bulletin"
      [(bulletinDaytimeDescription)]="bulletinDaytimeDescription"
      [(matrixInformation)]="avalancheProblemModel.matrixInformation"
      [snowpackStability]="avalancheProblemModel.matrixInformation.snowpackStability"
      [frequency]="avalancheProblemModel.matrixInformation.frequency"
      [avalancheSize]="avalancheProblemModel.matrixInformation.avalancheSize"
      [disabled]="true"
    ></app-matrix>
  </div>
  <div *ngIf="!authenticationService.getActiveRegion().showMatrix" class="form-group">
    <app-matrix-parameter
      [(bulletin)]="bulletin"
      [(bulletinDaytimeDescription)]="bulletinDaytimeDescription"
      [(matrixInformation)]="avalancheProblemModel.matrixInformation"
      [disabled]="disabled"
    ></app-matrix-parameter>
  </div>
</div>
