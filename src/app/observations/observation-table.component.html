<table class="table table-hover">
  <thead>
    <tr>
      <td colspan="99" style="text-align: left">
        <p-toggleButton
          onLabel=""
          offLabel=""
          onIcon="fa fa-map-marker"
          offIcon="fa fa-map-marker"
          [(ngModel)]="showObservationsWithoutCoordinates"
        ></p-toggleButton>
        <p *ngIf="!showObservationsWithoutCoordinates" style="float: right;">
          {{ observations.count | translate }} {{ observations.lenght }}
        </p>
        <p *ngIf="showObservationsWithoutCoordinates" style="float: right;">
          {{ observations.count | translate }} {{ observations.filter(hasNoCoordinates).lenght }}
        </p>
      </td>
    </tr>
    <tr>
      <th></th>
      <th><i class="fa fa-calendar"></i> {{ "observations.eventDate" | translate }}</th>
      <th><i class="fa fa-user"></i> {{ "observations.authorName" | translate }}</th>
      <th><i class="fa fa-globe"></i> {{ "observations.locationName" | translate }}</th>
      <th><i class="fa fa-comment"></i> {{ "observations.content" | translate }}</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let observation of shownObservations" (click)="onClick(observation)" style="cursor: pointer" [ngStyle]="getTableRowStyle(observation)">
      <td [style]="{ color: observation.$markerColor }" [title]="observation.$source">â–ˆ</td>
      <td style="white-space: nowrap">{{ observation.eventDate | localizedDate: "dd.MM.yyyy HH:mm" }}</td>
      <td>{{ observation.authorName }}</td>
      <td>
        {{ observation.locationName }}
        <i *ngIf="observation.latitude && observation.longitude" class="fa fa-map-marker" title="{{ 'observations.hasCoordinates' | translate }}"></i>
      </td>
      <td>{{ observation.content }}</td>
    </tr>
  </tbody>
  <p-dialog [(visible)]="showDialog" [modal]="true" [header]="observation?.locationName" [style]="{ width: '80vw' }">
    <p-messages [(value)]="messages"></p-messages>
    <app-observation-editor *ngIf="observation" [observation]="observation"></app-observation-editor>
    <p-footer>
      <button
        type="button"
        pButton
        [icon]="saving ? 'pi pi-spin pi-spinner' : 'pi pi-save'"
        [disabled]="saving"
        (click)="saveObservation()"
        label="{{ 'observations.button.save' | translate }}"
      ></button>
      <button
        type="button"
        pButton
        [icon]="saving ? 'pi pi-spin pi-spinner' : 'pi pi-trash'"
        [disabled]="saving || observation?.id === undefined"
        (click)="deleteObservation()"
        label="{{ 'observations.button.delete' | translate }}"
        class="ui-button-danger"
      ></button>
      <button
        type="button"
        pButton
        icon="pi pi-times"
        (click)="discardObservation()"
        label="{{ 'observations.button.discard' | translate }}"
        class="ui-button-secondary"
      ></button>
    </p-footer>
  </p-dialog>
</table>
